(this["webpackJsonpcc-assignment-2"]=this["webpackJsonpcc-assignment-2"]||[]).push([[0],{1028:function(e,t,a){},1029:function(e,t,a){},1030:function(e,t,a){},1031:function(e,t,a){},1047:function(e,t,a){},1048:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(63),i=a.n(s),o=a(39),l=a(248),c=a(27),u=a.n(c),m=a(50),d=a(30),p=a(31),h=a(33),g=a(32),f=a(34),v=a(138),b=a(96),E=a(316),y=a(1058),k=a(1056),O=a(1057),w=a(317),C=a(127),S=a(137),j=function(e){var t=e.component,a=e.props,n=Object(S.a)(e,["component","props"]);return r.a.createElement(C.a,Object.assign({},n,{render:function(e){return r.a.createElement(t,Object.assign({},e,a))}}))},L=a(1051),A=a(1060),x=(a(249),a(79)),I=a(65),P=a(98),N=a.n(P),D=a(324),T=a.n(D);N.a.setApiKey("AIzaSyA4UwK6X9-Oa5SdAapdiNPE8nAPJ6INRxw"),N.a.enableDebug();var _=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).getDistrict=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0]&&"administrative_area_level_2"===e[t].types[0])return e[t].long_name},a.getState=function(e){for(var t=0;t<e.length;t++)for(var a=0;a<e.length;a++)if(e[a].types[0]&&"administrative_area_level_1"===e[a].types[0])return e[a].long_name},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.onInfoWindowClose=function(e){},a.onMarkerDragEnd=function(e){var t=e.latLng.lat(),n=e.latLng.lng();N.a.fromLatLng(t,n).then((function(e){var r=e.results[0].formatted_address,s=e.results[0].address_components,i=a.getDistrict(s),o=a.getState(s);a.setState({address:r||"",District:i||"",state:o||"",markerPosition:{lat:t,lng:n},mapPosition:{lat:t,lng:n}})}),(function(e){console.error(e)}))},a.onPlaceSelected=function(e){console.log("plc",e);var t=e.formatted_address,n=e.address_components,r=a.getDistrict(n),s=a.getState(n),i=e.geometry.location.lat(),o=e.geometry.location.lng();a.setState({address:t||"",District:r||"",state:s||"",markerPosition:{lat:i,lng:o},mapPosition:{lat:i,lng:o}})},a.state={address:"",District:"",state:"",mapPosition:{lat:a.props.center.lat,lng:a.props.center.lng},markerPosition:{lat:a.props.center.lat,lng:a.props.center.lng}},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.a.fromLatLng(this.state.mapPosition.lat,this.state.mapPosition.lng).then((function(t){var a=t.results[0].formatted_address,n=t.results[0].address_components,r=e.getDistrict(n),s=e.getState(n);console.log("District",r,s),e.setState({address:a||"",District:r||"",state:s||""})}),(function(e){console.error(e)}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.markerPosition.lat!==this.props.center.lat||this.state.address!==t.address||this.state.District!==t.District||this.state.state!==t.state||this.props.center.lat!==e.center.lat&&void 0}},{key:"render",value:function(){var e=this,t=Object(I.withScriptjs)(Object(I.withGoogleMap)((function(t){return r.a.createElement(I.GoogleMap,{google:e.props.google,defaultZoom:e.props.zoom,defaultCenter:{lat:e.state.mapPosition.lat,lng:e.state.mapPosition.lng}},r.a.createElement(I.InfoWindow,{onClose:e.onInfoWindowClose,position:{lat:e.state.markerPosition.lat+.0018,lng:e.state.markerPosition.lng}},r.a.createElement("div",null,r.a.createElement("span",{style:{padding:0,margin:0}},e.state.address))),r.a.createElement(I.Marker,{google:e.props.google,name:"Dolores park",draggable:!0,onDragEnd:e.onMarkerDragEnd,position:{lat:e.state.markerPosition.lat,lng:e.state.markerPosition.lng}}),r.a.createElement(I.Marker,null),r.a.createElement(T.a,{style:{width:"100%",height:"40px",paddingLeft:"16px",marginTop:"2px",marginBottom:"500px"},onPlaceSelected:e.onPlaceSelected,types:["(regions)"]}))})));return void 0!==this.props.center.lat?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"City"),r.a.createElement("input",{type:"text",name:"state",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.state})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"District"),r.a.createElement("input",{type:"text",name:"District",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.District})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"Address"),r.a.createElement("input",{type:"text",name:"address",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.address}))),r.a.createElement(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyA4UwK6X9-Oa5SdAapdiNPE8nAPJ6INRxw&libraries=places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:this.props.height}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})})):r.a.createElement("div",{style:{height:this.props.height}})}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={isLoading:!0,testApiCall:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.isAuthenticated){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.testApiCall();case 5:t=e.sent,this.setState({testApiCall:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0);case 12:this.setState({isLoading:!1});case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"testApiCall",value:function(){return o.a.get("testApiCall","/hello")}},{key:"renderTestAPI",value:function(e){return console.log(e),e.message}},{key:"renderLander",value:function(){return r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"Test web app"),r.a.createElement("p",null,"A simple react test app"))}},{key:"renderTest",value:function(){return r.a.createElement("div",{className:"test"},r.a.createElement(L.a,null,"Test API call"),r.a.createElement(A.a,null,!this.state.isLoading&&this.renderTestAPI(this.state.testApiCall)),r.a.createElement(_,{google:this.props.google,center:{lat:10.8231,lng:106.6297},height:"300px",zoom:15}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},this.props.isAuthenticated?this.renderTest():this.renderLander())}}]),t}(n.Component),z=(a(1028),function(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Sorry, page not found!"))}),U=a(1053),H=a(1054),R=a(1059),W=a(1052),M=a(328),G=(a(1029),function(e){var t=e.isLoading,a=e.text,n=e.loadingText,s=e.className,i=void 0===s?"":s,o=e.disabled,l=void 0!==o&&o,c=Object(S.a)(e,["isLoading","text","loadingText","className","disabled"]);return r.a.createElement(W.a,Object.assign({className:"LoaderButton ".concat(i),disabled:l||t},c),t&&r.a.createElement(M.a,{glyph:"refresh",className:"spinning"}),t?n:a)}),B=(a(313),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(x.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.prev=2,e.next=5,o.b.signIn(a.state.email,a.state.password);case 5:a.props.userHasAuthenticated(!0),a.props.history.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0.message),a.setState({isLoading:!1});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!1,email:"",password:""},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0}},{key:"render",value:function(){return r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(U.a,{controlId:"email",bsSize:"large"},r.a.createElement(H.a,null,"Email"),r.a.createElement(R.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(U.a,{controlId:"password",bsSize:"large"},r.a.createElement(H.a,null,"Password"),r.a.createElement(R.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(G,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Login",loadingText:"Logging in\u2026"}),r.a.createElement("br",null)))}}]),t}(n.Component)),J=a(1055),K=(a(1030),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(x.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.prev=2,e.next=5,o.b.signUp({username:a.state.email,password:a.state.password});case 5:n=e.sent,a.setState({newUser:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0.message);case 12:a.setState({isLoading:!1});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),a.handleConfirmationSubmit=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.prev=2,e.next=5,o.b.confirmSignUp(a.state.email,a.state.confirmationCode);case 5:return e.next=7,o.b.signIn(a.state.email,a.state.password);case 7:a.props.userHasAuthenticated(!0),a.props.history.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),alert(e.t0.message),a.setState({isLoading:!1});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!1,email:"",password:"",confirmPassword:"",confirmationCode:"",newUser:null},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0&&this.state.password===this.state.confirmPassword}},{key:"validateConfirmationForm",value:function(){return this.state.confirmationCode.length>0}},{key:"renderConfirmationForm",value:function(){return r.a.createElement("form",{onSubmit:this.handleConfirmationSubmit},r.a.createElement(U.a,{controlId:"confirmationCode",bsSize:"large"},r.a.createElement(H.a,null,"Confirmation Code"),r.a.createElement(R.a,{autoFocus:!0,type:"tel",value:this.state.confirmationCode,onChange:this.handleChange}),r.a.createElement(J.a,null,"Please check your email for the code.")),r.a.createElement(G,{block:!0,bsSize:"large",disabled:!this.validateConfirmationForm(),type:"submit",isLoading:this.state.isLoading,text:"Verify",loadingText:"Verifying\u2026"}))}},{key:"renderForm",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(U.a,{controlId:"email",bsSize:"large"},r.a.createElement(H.a,null,"Email"),r.a.createElement(R.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(U.a,{controlId:"password",bsSize:"large"},r.a.createElement(H.a,null,"Password"),r.a.createElement(R.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(U.a,{controlId:"confirmPassword",bsSize:"large"},r.a.createElement(H.a,null,"Confirm Password"),r.a.createElement(R.a,{value:this.state.confirmPassword,onChange:this.handleChange,type:"password"})),r.a.createElement(G,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Signup",loadingText:"Signing up\u2026"}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Signup"},null===this.state.newUser?this.renderForm():this.renderConfirmationForm())}}]),t}(n.Component)),V=a(329),X=a.n(V),Y=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedIn:!1,userID:"",name:"",email:"",picture:""},a.responseFacebook=function(e){a.setState({isLoggedIn:!0,userID:e.userID,name:e.name,email:e.email,picture:e.picture.data.url})},a.componentClicked=function(){return console.log("clicked")},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e;return e=this.state.isLoggedIn?r.a.createElement("div",null,r.a.createElement("div",{style:{width:"400px",margin:"auto",background:"#f4f4f4",padding:"20px"}},r.a.createElement("img",{src:this.state.picture,alt:this.state.name}),r.a.createElement("h2",null,"Welcome ",this.state.name),"Email: ",this.state.email),r.a.createElement("div",null,r.a.createElement("button",null," ",r.a.createElement(b.a,{to:"/Home2"}," Go to Crud ")," "))):r.a.createElement(X.a,{appId:"985020555176750",autoLoad:!0,fields:"name,email,picture",onClick:this.componentClicked,callback:this.responseFacebook}),r.a.createElement("div",null,e)}}]),t}(n.Component),Q=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("br",null),r.a.createElement(Y,null)))}}]),t}(n.Component),Z=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={isLoading:!0,testApiCall:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"testApiCall",value:function(){return o.a.get("testApiCall","/hello")}},{key:"renderTestAPI",value:function(e){return console.log(e),e.message}},{key:"renderLander",value:function(){return r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"Test web app"),r.a.createElement("p",null,"A simple react test app"))}},{key:"renderTest",value:function(){return r.a.createElement("div",{className:"test"},r.a.createElement(L.a,null,"Test API call"),r.a.createElement(A.a,null,!this.state.isLoading&&this.renderTestAPI(this.state.testApiCall)),r.a.createElement(_,{google:this.props.google,center:{lat:10.8231,lng:106.6297},height:"300px",zoom:15}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},this.props.isAuthenticated?this.renderLander():this.renderTest())}}]),t}(n.Component),$=function(e){var t=e.childProps;return r.a.createElement(w.a,null,r.a.createElement(j,{path:"/",exact:!0,component:F,props:t}),r.a.createElement(j,{path:"/login",exact:!0,component:B,props:t}),r.a.createElement(j,{path:"/signup",exact:!0,component:K,props:t}),r.a.createElement(j,{path:"/loginWFacebook",exact:!0,component:Q,props:t}),r.a.createElement(j,{path:"/Home2",exact:!0,component:Z,props:t}),r.a.createElement(C.a,{component:z}))},q=(a(1031),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).userHasAuthenticated=function(e){a.setState({isAuthenticated:e})},a.handleLogout=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.signOut();case 2:a.userHasAuthenticated(!1),a.props.history.push("/login");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={isAuthenticated:!1,isAuthenticating:!0},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.b.currentSession();case 3:if(!e.sent){e.next=5;break}this.userHasAuthenticated(!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"No current user"!==e.t0&&alert(e.t0);case 10:this.setState({isAuthenticating:!1});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={isAuthenticated:this.state.isAuthenticated,userHasAuthenticated:this.userHasAuthenticated};return r.a.createElement("div",{className:"App container"},r.a.createElement(y.a,{fluid:!0,collapseOnSelect:!0},r.a.createElement(y.a.Header,null,r.a.createElement(y.a.Brand,null,r.a.createElement(b.a,{to:"/"},"CleanUp Home")),r.a.createElement(y.a.Toggle,null)),r.a.createElement(y.a.Collapse,null,r.a.createElement(k.a,{pullRight:!0},this.state.isAuthenticated?r.a.createElement(O.a,{onClick:this.handleLogout},"Logout"):r.a.createElement(n.Fragment,null,r.a.createElement(v.LinkContainer,{to:"/signup"},r.a.createElement(O.a,null,"Signup")),r.a.createElement(v.LinkContainer,{to:"/login"},r.a.createElement(O.a,null,"Login")),r.a.createElement(v.LinkContainer,{to:"/loginWFacebook"},r.a.createElement(O.a,null,"Facebook Login")))))),r.a.createElement($,{childProps:e}))}}]),t}(n.Component)),ee=Object(E.a)(q),te={REGION:"us-east-1",URL:"https://nx7eiabksh.execute-api.us-east-1.amazonaws.com/dev"},ae={REGION:"us-east-1",USER_POOL_ID:"us-east-1_AVkhlsemI",APP_CLIENT_ID:"35c3p4oblr0rds72108e52h7bb",IDENTITY_POOL_ID:"us-east-1:2d5215d7-2b60-400d-b8a5-b7cb5f4833c9"},ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(1047);o.c.configure({Auth:{mandatorySignIn:!0,region:ae.REGION,userPoolId:ae.USER_POOL_ID,identityPoolId:ae.IDENTITY_POOL_ID,userPoolWebClientId:ae.APP_CLIENT_ID},API:{endpoints:[{name:"testApiCall",endpoint:te.URL,region:te.REGION}]}}),i.a.render(r.a.createElement(l.a,null,r.a.createElement(ee,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");ne?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):re(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):re(e)}))}}()},145:function(e,t){},151:function(e,t){},249:function(e,t,a){},313:function(e,t,a){},333:function(e,t,a){e.exports=a(1048)}},[[333,1,2]]]);
//# sourceMappingURL=main.5c4dd914.chunk.js.map